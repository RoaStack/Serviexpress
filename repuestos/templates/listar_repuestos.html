{% extends 'base.html' %}
{% load static %}

{% block title %}Lista de Repuestos{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/repuestos/lista_repuestos.css' %}">
{% endblock %}

{% block body_class %}dashboard-body{% endblock %}
{% block main_class %}p-0 m-0 w-100{% endblock %}

{% block content %}

<div class="lr-wrapper">
  <div class="lr-overlay">

    <!-- üîô Volver -->
    <div class="lr-back-container">
      <a href="{% url 'usuarios:dashboard' %}" class="lr-btn-back">
        ‚Üê Volver al dashboard
      </a>
    </div>

    <!-- T√≠tulo -->
    <h1 class="lr-title">Lista de Repuestos</h1>

    <!-- Bot√≥n crear -->
    <div class="lr-top-actions">
      <a href="{% url 'repuestos:registrar_repuesto' %}" class="lr-btn lr-btn-orange">
        ‚ûï Nuevo Repuesto
      </a>
    </div>

    {% if repuestos %}
    <!-- Tabla -->
    <div class="lr-table-wrapper">
      <table class="lr-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Marca</th>
            <th>Precio compra</th>
            <th>Precio venta</th>
            <th>Stock</th>
            <th>L√≠mite stock</th>
          </tr>
        </thead>
        <tbody>
          {% for repuesto in repuestos %}
          <tr class="{% if repuesto.stock <= repuesto.limite_stock %}lr-low-stock{% endif %}">
            <td>{{ repuesto.nombre }}</td>
            <td>{{ repuesto.marca }}</td>
            <td>${{ repuesto.precio_compra }}</td>
            <td>${{ repuesto.precio_venta }}</td>
            <td>{{ repuesto.stock }}</td>
            <td>{{ repuesto.limite_stock }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% else %}
    <div class="lr-empty">
      <h3>üì≠ No hay repuestos registrados actualmente.</h3>
      <p>Puedes agregar uno nuevo haciendo clic en el bot√≥n superior.</p>
    </div>
    {% endif %}

  </div>
</div>

{% endblock %}
