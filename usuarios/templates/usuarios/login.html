{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}Iniciar sesi√≥n{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'usuarios/css/login.css' %}">
{% endblock %}

{% block body_class %}login-body{% endblock %}

{% block content %}

<div class="login-overlay">

    <div class="login-box animate-login">

        <!-- LOGO -->
        <div class="login-logo">
            <img src="{% static 'img/logoLogin.png' %}" alt="Logo">
        </div>
        <h2 class="login-title">Inicio de Sesi√≥n</h2>

        <!-- MENSAJE DE ERROR -->
        {% if form.errors %}
        <div class="error-box">
            ‚ùå Usuario o contrase√±a incorrectos
        </div>
        {% endif %}

        <form method="POST">
            {% csrf_token %}

            <!-- Campo usuario -->
            <div class="input-group-custom {% if form.username.errors %}input-error{% endif %}">
                <span class="input-icon">üë§</span>
                <input type="text"
                      name="username"
                      placeholder="Nombre de usuario"
                      required>
            </div>

            <!-- Campo contrase√±a -->
            <div class="input-group-custom {% if form.password.errors %}input-error{% endif %}">
                <span class="input-icon">üîí</span>

                <input type="password"
                      id="password-field"
                      name="password"
                      placeholder="Contrase√±a"
                      required>

                <!-- Ojo SVG -->
                <span class="toggle-password" onclick="togglePassword()">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none"
                        stroke="#d3d7ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </span>
            </div>

            <!-- Link Olvidaste contrase√±a -->
            <div class="forgot-container">
                <a href="#" class="forgot-link">¬øOlvidaste tu contrase√±a?</a>
            </div>
            <!-- Bot√≥n -->
            <button type="submit" class="login-btn">Inicia Sesi√≥n</button>
            
            <div class="forgot-container">
                <p class="login-note">¬øA√∫n no tienes cuenta?</p>
                <a href="{% url 'usuarios:registro_usuario' %}" class="forgot-liink">Registrate aqui.</a>
            </div>
        </form>
    </div>
</div>

<script>
function togglePassword() {
    let field = document.getElementById("password-field");
    field.type = field.type === "password" ? "text" : "password";
}
</script>

{% endblock %}
